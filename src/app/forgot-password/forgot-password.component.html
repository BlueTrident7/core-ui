<div class="auth-container">
  <div class="left-side">
    <!-- Optional image or branding -->
  </div>

  <div class="right-side">
    <div class="form-card">
      <div class="form-header">
        <h2 class="form-title">Forgot Password</h2>
        <p class="form-subtitle" *ngIf="currentStep === 1">
          Enter your mobile number to receive an OTP
        </p>
        <p class="form-subtitle" *ngIf="currentStep === 2">
          Enter the OTP sent to your mobile number
        </p>
        <p class="form-subtitle" *ngIf="currentStep === 3">
          Enter your new password
        </p>
      </div>

      <!-- Step 1: Mobile Number -->
      <form *ngIf="currentStep === 1" [formGroup]="mobileForm" (ngSubmit)="onSendOTP()" class="auth-form">
        <div class="input-group">
          <label for="mobileNumber">Mobile Number</label>
          <input id="mobileNumber" type="tel" formControlName="mobileNumber" placeholder="+91" class="form-input" autocomplete="tel" />
          <div class="error" *ngIf="mf['mobileNumber'].touched && mf['mobileNumber'].errors">
            <small *ngIf="mf['mobileNumber'].errors['required']">Mobile number is required</small>
            <small *ngIf="mf['mobileNumber'].errors['pattern']">Enter a valid mobile number</small>
          </div>
        </div>
        <button type="submit" class="submit-btn" [disabled]="!mobileForm.valid || isLoading">
          {{ isLoading ? 'Sending OTP...' : 'Send OTP' }}
        </button>
      </form>

      <!-- Step 2: OTP Verification -->
      <form *ngIf="currentStep === 2" [formGroup]="otpForm" (ngSubmit)="onVerifyOTP()" class="auth-form">
        <div class="input-group">
          <label for="otp">OTP</label>
          <input id="otp" type="text" formControlName="otp" placeholder="Enter OTP" class="form-input" autocomplete="one-time-code" />
          <div class="error" *ngIf="of['otp'].touched && of['otp'].errors">
            <small *ngIf="of['otp'].errors['required']">OTP is required</small>
            <small *ngIf="of['otp'].errors['pattern']">Enter a valid 6-digit OTP</small>
          </div>
        </div>
        <button type="submit" class="submit-btn" [disabled]="!otpForm.valid || isLoading">
          {{ isLoading ? 'Verifying OTP...' : 'Verify OTP' }}
        </button>
        <button type="button" class="link-btn" (click)="goBack()" [disabled]="isLoading">Back</button>
      </form>

      <!-- Step 3: Reset Password -->
      <form *ngIf="currentStep === 3" [formGroup]="resetForm" (ngSubmit)="onResetPassword()" class="auth-form">
        <div class="input-group">
          <input type="password" formControlName="newPassword" placeholder="New Password" class="form-input" autocomplete="new-password" />
          <div class="error" *ngIf="rf['newPassword'].touched && rf['newPassword'].errors">
            <small *ngIf="rf['newPassword'].errors['required']">New password is required</small>
            <small *ngIf="rf['newPassword'].errors['minlength']">Password must be at least 6 characters</small>
          </div>
        </div>
        <div class="input-group">
          <input type="password" formControlName="confirmPassword" placeholder="Confirm Password" class="form-input" autocomplete="new-password" />
          <div class="error" *ngIf="rf['confirmPassword'].touched && resetForm.errors?.['mismatch']">
            <small>Passwords do not match</small>
          </div>
        </div>
        <button type="submit" class="submit-btn" [disabled]="!resetForm.valid || isLoading">
          {{ isLoading ? 'Resetting Password...' : 'Reset Password' }}
        </button>
        <button type="button" class="link-btn" (click)="goBack()" [disabled]="isLoading">Back</button>
      </form>

      <div *ngIf="message" class="message">{{ message }}</div>

      <div class="toggle-link">
        <p><a routerLink="/auth" class="link-btn">Back to Login</a></p>
      </div>
    </div>
  </div>
</div>
